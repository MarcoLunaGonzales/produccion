<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.1.1.final using JasperReports Library version 6.0.2  -->
<!-- 2016-09-19T11:25:58 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reporteDesviacionPlanificadaProgramaProduccion" pageWidth="527" pageHeight="623" columnWidth="527" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isSummaryWithPageHeaderAndFooter="true" uuid="c7fd5500-bdad-4a45-a600-88973068be8e">
	<property name="ireport.scriptlethandling" value="2"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<template><![CDATA["C:\\stylosJasperReport\\StylosImpresionOM.jrtx"]]></template>
	<style name="colorNuevo" mode="Opaque" backcolor="#91FA93"/>
	<style name="colorModificado" mode="Opaque" backcolor="#FAF38C"/>
	<style name="colorEliminado" mode="Opaque" backcolor="#E3A09F"/>
	<style name="condicionalEmpaquePrimario" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{cantidad}==null]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{cantidadDesv}==null]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
	</style>
	<style name="condicionalCantidadEmpaquePrimario" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{cantidad}==null]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{cantidadDesv}==null]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[!$F{cantidad}.toString().equals($F{cantidadDesv}.toString())]]></conditionExpression>
			<style backcolor="#FAF38C"/>
		</conditionalStyle>
	</style>
	<style name="condicionalEmpaqueSecundario" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{cantidad}==null]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{CANTIDADDesviacion}==null]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
	</style>
	<style name="condicionalCantidadEmpaqueSecundario" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{cantidad}==null]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{CANTIDADDesviacion}==null]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[!$F{cantidad}.toString().equals($F{CANTIDADDesviacion}.toString())]]></conditionExpression>
			<style backcolor="#FAF38C"/>
		</conditionalStyle>
	</style>
	<style name="celdaRowspan">
		<box>
			<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
		</box>
	</style>
	<style name="condicionalCantidadFraccion" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{CANTIDAD}==null]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{CANTIDADDESVIACION}==null]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[!$F{CANTIDAD}.toString().equals($F{CANTIDADDESVIACION}.toString())]]></conditionExpression>
			<style backcolor="#FAF38C"/>
		</conditionalStyle>
	</style>
	<style name="condicionalMateriaPrima" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{numeroFm}.equals(new Double("0"))]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{numeroDesv}.equals(new Double("0"))]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
	</style>
	<style name="condicionalNumeroFracciones" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{numeroFm}.equals(new Double("0"))]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{numeroDesv}.equals(new Double("0"))]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[!$V{numeroFm}.toString().equals($V{numeroDesv}.toString())]]></conditionExpression>
			<style backcolor="#FAF38C"/>
		</conditionalStyle>
	</style>
	<style name="condicionalCantidadMaterial" style="textoBody." mode="Opaque">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{cantidadTotalFm}==null]]></conditionExpression>
			<style backcolor="#91FA93"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{cantidadTotalDesv}==null]]></conditionExpression>
			<style backcolor="#E3A09F"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[!$V{cantidadTotalFm}.toString().equals($V{cantidadTotalDesv}.toString())]]></conditionExpression>
			<style backcolor="#FAF38C"/>
		</conditionalStyle>
	</style>
	<subDataset name="dataSetLotes" uuid="3e087aa2-f86b-4411-8f80-15b70cf77ac1">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Oficial"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="codDesviacion" class="java.lang.String"/>
		<queryString>
			<![CDATA[select d.COD_DESVIACION,pp.COD_LOTE_PRODUCCION,cpv.nombre_prod_semiterminado,tpp.NOMBRE_TIPO_PROGRAMA_PROD,ppp.NOMBRE_PRODUCTO_PRESENTACION,pp.CANT_LOTE_PRODUCCION
from DESVIACION d 
	inner join PROGRAMA_PRODUCCION pp on pp.COD_PROGRAMA_PROD=d.COD_PROGRAMA_PROD
    		and pp.COD_LOTE_PRODUCCION=d.COD_LOTE_PRODUCCION
	inner join COMPONENTES_PROD_VERSION cpv on cpv.COD_COMPPROD=pp.COD_COMPPROD
            and cpv.COD_VERSION=pp.COD_COMPPROD_VERSION
    inner join TIPOS_PROGRAMA_PRODUCCION tpp on tpp.COD_TIPO_PROGRAMA_PROD=pp.COD_TIPO_PROGRAMA_PROD
    inner join PRESENTACIONES_PRODUCTO ppp on ppp.cod_presentacion=pp.COD_PRESENTACION
where d.COD_DESVIACION= $P{codDesviacion}     
order by cpv.nombre_prod_semiterminado,tpp.PRIORIDAD_PROCESOS_PRODUCCION]]>
		</queryString>
		<field name="COD_DESVIACION" class="java.lang.Integer"/>
		<field name="COD_LOTE_PRODUCCION" class="java.lang.String"/>
		<field name="nombre_prod_semiterminado" class="java.lang.String"/>
		<field name="NOMBRE_TIPO_PROGRAMA_PROD" class="java.lang.String"/>
		<field name="NOMBRE_PRODUCTO_PRESENTACION" class="java.lang.String"/>
		<field name="CANT_LOTE_PRODUCCION" class="java.lang.Double"/>
	</subDataset>
	<subDataset name="dataSetDiferenciasMp" uuid="e3524288-38ff-4905-a9b8-521fb4ea35fe">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="local20160802"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="codDesviacion" class="java.lang.Integer"/>
		<parameter name="codLoteProduccion" class="java.lang.String"/>
		<parameter name="codProgramaProd" class="java.lang.Integer"/>
		<queryString>
			<![CDATA[select pp.COD_COMPPROD,cpv.nombre_prod_semiterminado,
		m.COD_MATERIAL,
       m.NOMBRE_MATERIAL,
       um.NOMBRE_UNIDAD_MEDIDA,
       material.cantidad as CANTIDAD,
       material.cantidadDesviacion AS CANTIDADDESVIACION,
       material.COD_FORMULA_MAESTRA_FRACCIONES,
       material.COD_FORMULA_MAESTRA_FRACCIONESDESVIACION
from PROGRAMA_PRODUCCION pp
	inner join COMPONENTES_PROD_VERSION cpv on cpv.COD_VERSION=pp.COD_COMPPROD_VERSION
    		and cpv.COD_COMPPROD=pp.COD_COMPPROD
     left join
     (
     	select isnull(fm.COD_MATERIAL,desv.COD_MATERIAL) as COD_MATERIAL,isnull(fm.COD_UNIDAD_MEDIDA,desv.COD_UNIDAD_MEDIDA) as COD_UNIDAD_MEDIDA
        	,fm.cantidad,desv.cantidad as cantidadDesviacion,isnull(fm.COD_COMPPROD,desv.COD_COMPPROD) as COD_COMPPROD,
            fm.COD_FORMULA_MAESTRA_FRACCIONES,desv.COD_FORMULA_MAESTRA_FRACCIONES as COD_FORMULA_MAESTRA_FRACCIONESDESVIACION
        from
        (
        	select fmdv.COD_MATERIAL,fmdv.CANTIDAD_UNITARIA,fmdv.COD_UNIDAD_MEDIDA,sum(pp.CANT_LOTE_PRODUCCION/fmv.CANTIDAD_LOTE*fmdf.CANTIDAD) as cantidad,pp.COD_COMPPROD,fmdf.COD_FORMULA_MAESTRA_FRACCIONES
            from PROGRAMA_PRODUCCION pp
            	inner join FORMULA_MAESTRA_VERSION fmv on fmv.COD_VERSION=pp.COD_FORMULA_MAESTRA_VERSION
            	inner join FORMULA_MAESTRA_DETALLE_MP_VERSION fmdv on fmdv.COD_FORMULA_MAESTRA=pp.COD_FORMULA_MAESTRA
                	and fmdv.COD_VERSION=pp.COD_FORMULA_MAESTRA_VERSION
            	inner join FORMULA_MAESTRA_DETALLE_MP_FRACCIONES_VERSION fmdf on fmdf.COD_FORMULA_MAESTRA=pp.COD_FORMULA_MAESTRA
                	and fmdf.COD_VERSION=pp.COD_FORMULA_MAESTRA_VERSION
                    and fmdf.COD_MATERIAL=fmdv.COD_MATERIAL
            where pp.COD_LOTE_PRODUCCION=  $P{codLoteProduccion} 
            		and pp.COD_PROGRAMA_PROD= $P{codProgramaProd} 
            group by pp.COD_COMPPROD,fmdv.COD_MATERIAL,fmdv.CANTIDAD_UNITARIA,fmdv.COD_UNIDAD_MEDIDA,fmdf.COD_FORMULA_MAESTRA_FRACCIONES
        ) fm 
        full outer join 
        (
        	select dfm.COD_MATERIAL,dfm.CANTIDAD_UNITARIA,dfm.COD_UNIDAD_MEDIDA,dfmf.CANTIDAD,dfm.COD_COMPPROD,dfmf.COD_FORMULA_MAESTRA_FRACCIONES
            from DESVIACION_FORMULA_MAESTRA_DETALLE_MP dfm 
            	inner join DESVIACION_FORMULA_MAESTRA_DETALLE_MP_FRACCIONES dfmf on dfm.COD_DESVIACION=dfm.COD_DESVIACION
                	and dfmf.COD_COMPPROD=dfm.COD_COMPPROD
                    and dfmf.COD_MATERIAL=dfm.COD_MATERIAL
           WHERE dfm.COD_DESVIACION= $P{codDesviacion} 
        ) desv on fm.COD_MATERIAL=desv.COD_MATERIAL
        		and fm.COD_COMPPROD=desv.COD_COMPPROD
                and fm.COD_FORMULA_MAESTRA_FRACCIONES=desv.COD_FORMULA_MAESTRA_FRACCIONES
     ) material on material.COD_COMPPROD=pp.COD_COMPPROD
     left outer join materiales m on m.COD_MATERIAL = material.COD_MATERIAL
     left outer join UNIDADES_MEDIDA um on um.COD_UNIDAD_MEDIDA =
     material.COD_UNIDAD_MEDIDA
where pp.COD_LOTE_PRODUCCION= $P{codLoteProduccion} 
	and pp.COD_PROGRAMA_PROD= $P{codProgramaProd} 
group by m.COD_MATERIAL,pp.COD_COMPPROD,cpv.nombre_prod_semiterminado,
       m.NOMBRE_MATERIAL,
       um.NOMBRE_UNIDAD_MEDIDA,
       material.cantidad,
       material.cantidadDesviacion,
       material.COD_FORMULA_MAESTRA_FRACCIONES,
       material.COD_FORMULA_MAESTRA_FRACCIONESDESVIACION
order by cpv.nombre_prod_semiterminado,pp.COD_COMPPROD,m.NOMBRE_MATERIAL,
         um.NOMBRE_UNIDAD_MEDIDA,ISNULL(material.COD_FORMULA_MAESTRA_FRACCIONES,0),
       ISNULL(material.COD_FORMULA_MAESTRA_FRACCIONESDESVIACION,0)]]>
		</queryString>
		<field name="COD_COMPPROD" class="java.lang.Integer"/>
		<field name="nombre_prod_semiterminado" class="java.lang.String"/>
		<field name="COD_MATERIAL" class="java.lang.Integer"/>
		<field name="NOMBRE_MATERIAL" class="java.lang.String"/>
		<field name="NOMBRE_UNIDAD_MEDIDA" class="java.lang.String"/>
		<field name="CANTIDAD" class="java.lang.Double"/>
		<field name="CANTIDADDESVIACION" class="java.lang.Double"/>
		<field name="COD_FORMULA_MAESTRA_FRACCIONES" class="java.lang.Integer"/>
		<field name="COD_FORMULA_MAESTRA_FRACCIONESDESVIACION" class="java.lang.Integer"/>
		<variable name="cantidadTotalFm" class="java.lang.Double" resetType="Group" resetGroup="Group1" calculation="Sum">
			<variableExpression><![CDATA[$F{CANTIDAD}]]></variableExpression>
			<initialValueExpression><![CDATA[0]]></initialValueExpression>
		</variable>
		<variable name="cantidadTotalDesv" class="java.lang.Double" resetType="Group" resetGroup="Group1" calculation="Sum">
			<variableExpression><![CDATA[$F{CANTIDADDESVIACION}]]></variableExpression>
			<initialValueExpression><![CDATA[0]]></initialValueExpression>
		</variable>
		<variable name="numeroFm" class="java.lang.Double" resetType="Group" resetGroup="Group1" calculation="Sum">
			<variableExpression><![CDATA[$F{CANTIDAD}!=null?1:0]]></variableExpression>
			<initialValueExpression><![CDATA[0]]></initialValueExpression>
		</variable>
		<variable name="numeroDesv" class="java.lang.Double" resetType="Group" resetGroup="Group1" calculation="Sum">
			<variableExpression><![CDATA[$F{CANTIDADDESVIACION}!=null?1:0]]></variableExpression>
			<initialValueExpression><![CDATA[0]]></initialValueExpression>
		</variable>
		<group name="Group1">
			<groupExpression><![CDATA[$F{NOMBRE_MATERIAL}]]></groupExpression>
		</group>
		<group name="Group2">
			<groupExpression><![CDATA[$F{COD_COMPPROD}]]></groupExpression>
		</group>
	</subDataset>
	<subDataset name="dataSetDiferenciasEp" uuid="765c37c3-b5b4-4a27-9aed-644a2b2b75ec">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Oficial"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="codLoteProduccion" class="java.lang.String"/>
		<parameter name="codProgramaProd" class="java.lang.Integer"/>
		<parameter name="codDesviacion" class="java.lang.Integer"/>
		<queryString>
			<![CDATA[select ppv.COD_PRESENTACION_PRIMARIA,
       tpp.NOMBRE_TIPO_PROGRAMA_PROD,
       m.NOMBRE_MATERIAL,
       round(sum(material.CANTIDAD * pp.CANT_LOTE_PRODUCCION / fmv.CANTIDAD_LOTE),2) as
       cantidad,
       round(material.cantidadDesv,2) as cantidadDesv,
       um.NOMBRE_UNIDAD_MEDIDA,
       ep.nombre_envaseprim,
       tpp.NOMBRE_TIPO_PROGRAMA_PROD,ppv.CANTIDAD as cantidadEnvase
from PROGRAMA_PRODUCCION pp
     inner join FORMULA_MAESTRA_VERSION fmv on fmv.COD_VERSION =
     pp.COD_FORMULA_MAESTRA_VERSION and pp.COD_FORMULA_MAESTRA =
     fmv.COD_FORMULA_MAESTRA
     INNER JOIN TIPOS_PROGRAMA_PRODUCCION tpp on tpp.COD_TIPO_PROGRAMA_PROD =
     pp.COD_TIPO_PROGRAMA_PROD
     inner join PRESENTACIONES_PRIMARIAS_VERSION ppv on ppv.COD_COMPPROD =
     pp.COD_COMPPROD and ppv.COD_VERSION = pp.COD_COMPPROD_VERSION and
     ppv.COD_TIPO_PROGRAMA_PROD = pp.COD_TIPO_PROGRAMA_PROD
     inner join ENVASES_PRIMARIOS ep on ep.cod_envaseprim = ppv.COD_ENVASEPRIM
     left join
     (
     		select isnull(fm.COD_MATERIAL,desv.COD_MATERIAL) AS COD_MATERIAL,
            	isnull(fm.COD_PRESENTACION_PRIMARIA,desv.COD_PRESENTACION_PRIMARIA) as COD_PRESENTACION_PRIMARIA,
                fm.CANTIDAD, desv.CANTIDAD as cantidadDesv,isnull(fm.COD_UNIDAD_MEDIDA,desv.COD_UNIDAD_MEDIDA) as COD_UNIDAD_MEDIDA
            from
            (
                 select f.COD_PRESENTACION_PRIMARIA,f.COD_MATERIAL,f.CANTIDAD,f.COD_UNIDAD_MEDIDA
                 from FORMULA_MAESTRA_DETALLE_EP_VERSION f
                        inner join PROGRAMA_PRODUCCION pp on f.COD_FORMULA_MAESTRA=f.COD_FORMULA_MAESTRA
                        and pp.COD_FORMULA_MAESTRA_VERSION=f.COD_VERSION
                 where pp.COD_LOTE_PRODUCCION= $P{codLoteProduccion} 
                        and pp.COD_PROGRAMA_PROD= $P{codProgramaProd} 
            ) as fm
            full outer join 
            (
                select d.COD_PRESENTACION_PRIMARIA,d.COD_MATERIAL,d.CANTIDAD,d.COD_UNIDAD_MEDIDA
                 from DESVIACION_FORMULA_MAESTRA_DETALLE_EP d 
                 WHERE d.COD_DESVIACION= $P{codDesviacion} 
            ) as desv on desv.COD_MATERIAL=fm.COD_MATERIAL
            	and fm.COD_PRESENTACION_PRIMARIA=desv.COD_PRESENTACION_PRIMARIA
     
     ) as  material on material.COD_PRESENTACION_PRIMARIA=ppv.COD_PRESENTACION_PRIMARIA
     inner join materiales m on m.COD_MATERIAL = material.COD_MATERIAL
     inner join UNIDADES_MEDIDA um on um.COD_UNIDAD_MEDIDA =
     material.COD_UNIDAD_MEDIDA
where pp.COD_LOTE_PRODUCCION = $P{codLoteProduccion}   and
      pp.COD_PROGRAMA_PROD =  $P{codProgramaProd} 
group by ppv.COD_PRESENTACION_PRIMARIA,
         ep.nombre_envaseprim,
         tpp.NOMBRE_TIPO_PROGRAMA_PROD,
         tpp.NOMBRE_TIPO_PROGRAMA_PROD,
         m.NOMBRE_MATERIAL,
         material.cantidadDesv,
         um.NOMBRE_UNIDAD_MEDIDA,ppv.CANTIDAD]]>
		</queryString>
		<field name="COD_PRESENTACION_PRIMARIA" class="java.lang.Integer"/>
		<field name="NOMBRE_TIPO_PROGRAMA_PROD" class="java.lang.String"/>
		<field name="NOMBRE_MATERIAL" class="java.lang.String"/>
		<field name="cantidad" class="java.lang.Double"/>
		<field name="cantidadDesv" class="java.lang.Double"/>
		<field name="NOMBRE_UNIDAD_MEDIDA" class="java.lang.String"/>
		<field name="nombre_envaseprim" class="java.lang.String"/>
		<field name="COLUMN_8" class="java.lang.String"/>
		<field name="cantidadEnvase" class="java.lang.Integer"/>
		<group name="Group1">
			<groupExpression><![CDATA[$F{COD_PRESENTACION_PRIMARIA}]]></groupExpression>
		</group>
	</subDataset>
	<subDataset name="dataSetDiferenciasEs" uuid="2b62486b-c6ea-4243-a31e-a34128f5eb18">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Oficial"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="codLoteProduccion" class="java.lang.String"/>
		<parameter name="codProgramaProd" class="java.lang.Integer"/>
		<parameter name="codDesviacion" class="java.lang.Integer"/>
		<queryString>
			<![CDATA[select pp.COD_TIPO_PROGRAMA_PROD,
       pp.COD_PRESENTACION,
       pp1.NOMBRE_PRODUCTO_PRESENTACION,
       tpp.NOMBRE_TIPO_PROGRAMA_PROD,
       m.NOMBRE_MATERIAL,
       CEILING(sum(material.CANTIDAD * pp.CANT_LOTE_PRODUCCION /
       fmv.CANTIDAD_LOTE)) as cantidad,
       CEILING(material.CANTIDADDesviacion) as CANTIDADDesviacion,
       um.NOMBRE_UNIDAD_MEDIDA
from PROGRAMA_PRODUCCION pp
     inner join PRESENTACIONES_PRODUCTO pp1 on pp.COD_PRESENTACION =
     pp1.cod_presentacion
     inner join TIPOS_PROGRAMA_PRODUCCION tpp on tpp.COD_TIPO_PROGRAMA_PROD =
     pp.COD_TIPO_PROGRAMA_PROD
     inner join FORMULA_MAESTRA_VERSION fmv on fmv.COD_VERSION =
     pp.COD_FORMULA_MAESTRA_VERSION and fmv.COD_FORMULA_MAESTRA =
     pp.COD_FORMULA_MAESTRA
     left join
     (
     	select isnull(fm.COD_MATERIAL,desv.COD_MATERIAL) as COD_MATERIAL,isnull(fm.COD_UNIDAD_MEDIDA,desv.COD_UNIDAD_MEDIDA) as COD_UNIDAD_MEDIDA
        	,fm.cantidad,desv.cantidad as CANTIDADDesviacion,isnull(fm.COD_TIPO_PROGRAMA_PROD,desv.COD_TIPO_PROGRAMA_PROD) as COD_TIPO_PROGRAMA_PROD
            ,isnull(fm.COD_PRESENTACION_PRODUCTO,desv.COD_PRESENTACION) as COD_PRESENTACION
        from
        (
        	select fmdes.COD_MATERIAL,fmdes.CANTIDAD,fmdes.COD_UNIDAD_MEDIDA,fmdes.COD_TIPO_PROGRAMA_PROD,fmdes.COD_PRESENTACION_PRODUCTO
            from PROGRAMA_PRODUCCION pp
            	inner join FORMULA_MAESTRA_DETALLE_ES_VERSION fmdes on fmdes.COD_FORMULA_MAESTRA=pp.COD_FORMULA_MAESTRA
                	and fmdes.COD_FORMULA_MAESTRA_ES_VERSION=pp.COD_FORMULA_MAESTRA_ES_VERSION
            		and fmdes.COD_TIPO_PROGRAMA_PROD=pp.COD_TIPO_PROGRAMA_PROD
                   and fmdes.COD_PRESENTACION_PRODUCTO=pp.COD_PRESENTACION
            where pp.COD_LOTE_PRODUCCION= $P{codLoteProduccion} 
            		and pp.COD_PROGRAMA_PROD=    $P{codProgramaProd} 
        ) fm 
        full outer join 
        (
        	select d.COD_MATERIAL,d.CANTIDAD,d.COD_UNIDAD_MEDIDA,d.COD_TIPO_PROGRAMA_PROD,d.COD_PRESENTACION
             from DESVIACION_FORMULA_MAESTRA_DETALLE_ES d 
             WHERE d.COD_DESVIACION= $P{codDesviacion} 
        ) desv on fm.COD_MATERIAL=desv.COD_MATERIAL
        		AND fm.COD_PRESENTACION_PRODUCTO=desv.COD_PRESENTACION
                and fm.COD_TIPO_PROGRAMA_PROD=desv.COD_TIPO_PROGRAMA_PROD
     ) as material on material.COD_TIPO_PROGRAMA_PROD=pp.COD_TIPO_PROGRAMA_PROD
     			and pp.COD_PRESENTACION=material.COD_PRESENTACION
     inner join materiales m on m.COD_MATERIAL = material.COD_MATERIAL
     inner join UNIDADES_MEDIDA um on um.COD_UNIDAD_MEDIDA =
     material.COD_UNIDAD_MEDIDA
where pp.COD_LOTE_PRODUCCION = $P{codLoteProduccion}  and
      pp.COD_PROGRAMA_PROD =  $P{codProgramaProd} 
group by pp.COD_TIPO_PROGRAMA_PROD,
         pp.COD_PRESENTACION,
         pp1.NOMBRE_PRODUCTO_PRESENTACION,
         tpp.NOMBRE_TIPO_PROGRAMA_PROD,
         m.NOMBRE_MATERIAL,
         material.CANTIDADDesviacion,
         um.NOMBRE_UNIDAD_MEDIDA
order by tpp.NOMBRE_TIPO_PROGRAMA_PROD,
         pp1.NOMBRE_PRODUCTO_PRESENTACION,
         m.NOMBRE_MATERIAL]]>
		</queryString>
		<field name="COD_TIPO_PROGRAMA_PROD" class="java.lang.Integer"/>
		<field name="COD_PRESENTACION" class="java.lang.Integer"/>
		<field name="NOMBRE_PRODUCTO_PRESENTACION" class="java.lang.String"/>
		<field name="NOMBRE_TIPO_PROGRAMA_PROD" class="java.lang.String"/>
		<field name="NOMBRE_MATERIAL" class="java.lang.String"/>
		<field name="cantidad" class="java.lang.Double"/>
		<field name="CANTIDADDesviacion" class="java.lang.Double"/>
		<field name="NOMBRE_UNIDAD_MEDIDA" class="java.lang.String"/>
		<group name="Group1">
			<groupExpression><![CDATA[$F{COD_TIPO_PROGRAMA_PROD}.toString()+" - "+$F{COD_PRESENTACION}.toString()]]></groupExpression>
		</group>
	</subDataset>
	<parameter name="codDesviacion" class="java.lang.Integer">
		<parameterDescription><![CDATA[]]></parameterDescription>
		<defaultValueExpression><![CDATA[new Integer("525")]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select  d.COD_PROGRAMA_PROD,d.COD_LOTE_PRODUCCION,p.AP_PATERNO_PERSONAL+' '+p.AP_MATERNO_PERSONAL+' '+p.NOMBRES_PERSONAL as nombrePersonal,
	d.FECHA_DESVIACION,d.DESCRIPCION_DESVIACION
from desviacion d
left outer join PERSONAL p on p.COD_PERSONAL=d.COD_PERSONAL
where d.cod_desviacion= $P{codDesviacion}]]>
	</queryString>
	<field name="COD_PROGRAMA_PROD" class="java.lang.Integer"/>
	<field name="COD_LOTE_PRODUCCION" class="java.lang.String"/>
	<field name="nombrePersonal" class="java.lang.String"/>
	<field name="FECHA_DESVIACION" class="java.sql.Timestamp"/>
	<field name="DESCRIPCION_DESVIACION" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="282" splitType="Stretch">
			<staticText>
				<reportElement style="textoCabecera" x="161" y="0" width="228" height="16" uuid="2013cd69-8f52-4194-989b-35e0f33fb72c"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<text><![CDATA[Desviación Planificada de materiales]]></text>
			</staticText>
			<rectangle>
				<reportElement style="linea" positionType="Float" x="155" y="86" width="210" height="15" uuid="41e6f225-60eb-472b-8905-0f93a5fcd212">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
			</rectangle>
			<staticText>
				<reportElement style="textoBold" positionType="Float" x="164" y="89" width="28" height="10" uuid="eecdff45-9132-4bab-9062-ae3f253d8bcc"/>
				<text><![CDATA[Nuevo]]></text>
			</staticText>
			<staticText>
				<reportElement style="textoBold" positionType="Float" x="224" y="89" width="40" height="10" uuid="0177679f-e577-48ad-968e-24aec5ce39bf"/>
				<text><![CDATA[Modificado]]></text>
			</staticText>
			<staticText>
				<reportElement style="textoBold" positionType="Float" x="294" y="89" width="34" height="10" uuid="f0365c8b-3ac9-4549-9e28-2c635330a421"/>
				<text><![CDATA[Eliminado]]></text>
			</staticText>
			<rectangle>
				<reportElement style="colorNuevo" positionType="Float" x="193" y="88" width="17" height="11" uuid="2b242f30-b46f-4252-8e26-43bc3cd5ab57"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</rectangle>
			<rectangle>
				<reportElement style="colorModificado" positionType="Float" x="264" y="88" width="17" height="11" backcolor="#FAF38C" uuid="613ad0f1-c7d3-47ca-84f2-bfa2bd9ea870"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</rectangle>
			<rectangle>
				<reportElement style="colorEliminado" positionType="Float" x="330" y="88" width="17" height="11" uuid="fdac37b5-db74-489d-badf-bbd899c29fef"/>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</rectangle>
			<componentElement>
				<reportElement positionType="Float" x="30" y="51" width="449" height="33" uuid="ad821ae1-af2e-4312-800e-2c65909e8257">
					<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
				</reportElement>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="dataSetLotes" uuid="b83b850f-273f-4fd3-bb9d-4c8a0022a9a0">
						<datasetParameter name="codDesviacion">
							<datasetParameterExpression><![CDATA[$P{codDesviacion}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="43" uuid="de7b4d80-599b-4272-aad0-4f40a31a78f0">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
						<jr:columnHeader style="celdaCabecera" height="14">
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="43" height="14" uuid="47840090-05ad-4dd9-a1cf-2f36a928f987"/>
								<text><![CDATA[Lote]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="celdaBody" height="16">
							<textField>
								<reportElement style="textoBody." x="0" y="0" width="43" height="16" uuid="da0e636b-9cfb-405a-8590-054daa34fb6e"/>
								<textFieldExpression><![CDATA[$F{COD_LOTE_PRODUCCION}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="127" uuid="569a485a-ec22-4eeb-a59c-0f26a9968388">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
						<jr:columnHeader style="celdaCabecera" height="14">
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="127" height="14" uuid="9689d24a-f0e7-4451-bc76-e82d8213d1f8"/>
								<text><![CDATA[Producto]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="celdaBody" height="16">
							<textField>
								<reportElement style="textoBody." x="0" y="0" width="127" height="16" uuid="b3269e8b-6500-4ccc-85c6-6716a1331c8a"/>
								<textFieldExpression><![CDATA[$F{nombre_prod_semiterminado}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="85" uuid="57ee26b3-e349-4d71-abad-2e61b4f210f9">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
						<jr:columnHeader style="celdaCabecera" height="14">
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="85" height="14" uuid="d5e90535-b371-413b-a73e-144ceb303739"/>
								<text><![CDATA[Tipo Programa Producción]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="celdaBody" height="16">
							<textField>
								<reportElement style="textoBody." x="0" y="0" width="85" height="16" uuid="3f5f974c-68b7-4563-beb7-89d193e2239c"/>
								<textFieldExpression><![CDATA[$F{NOMBRE_TIPO_PROGRAMA_PROD}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="140" uuid="1accb375-ba15-41e4-b457-d802c450b6ed">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
						<jr:columnHeader style="celdaCabecera" height="14">
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="140" height="14" uuid="201ec69d-8d2f-4703-aeb8-81f6e83cf512"/>
								<text><![CDATA[Presentación]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="celdaBody" height="16">
							<textField>
								<reportElement style="textoBody." x="0" y="0" width="140" height="16" uuid="3cbc4f0b-62b6-4344-a825-3aa63625bcc0"/>
								<textFieldExpression><![CDATA[$F{NOMBRE_PRODUCTO_PRESENTACION}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="58" uuid="6080770d-70ba-404c-b1ab-783d485c6c11">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column5"/>
						<jr:columnHeader style="celdaCabecera" height="14">
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="58" height="14" uuid="37d9f43e-adad-4ab6-8762-d4a7447dfcb3"/>
								<text><![CDATA[Cantidad Lote]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="celdaBody" height="16">
							<textField>
								<reportElement style="textoBody." x="0" y="0" width="58" height="16" uuid="6d794850-5b82-4ee5-9b2e-8fc0566bdcca"/>
								<textFieldExpression><![CDATA[$F{CANT_LOTE_PRODUCCION}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<componentElement>
				<reportElement positionType="Float" x="31" y="104" width="449" height="51" uuid="47504fca-9fb5-4db5-9523-04438b15b1e7">
					<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
				</reportElement>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="dataSetDiferenciasMp" uuid="53b36199-acda-498a-b5e6-610b5a919338">
						<datasetParameter name="codDesviacion">
							<datasetParameterExpression><![CDATA[$P{codDesviacion}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="codLoteProduccion">
							<datasetParameterExpression><![CDATA[$F{COD_LOTE_PRODUCCION}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="codProgramaProd">
							<datasetParameterExpression><![CDATA[$F{COD_PROGRAMA_PROD}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:columnGroup width="449" uuid="3d80e65d-98c5-40e3-a3fb-6d72202d1473">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Columns [8]"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<jr:tableHeader style="celdaCabecera" height="12">
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="449" height="12" uuid="36d235e2-9107-4109-b51b-a27a44cc4439"/>
								<textElement>
									<font size="9"/>
								</textElement>
								<text><![CDATA[MATERIA PRIMA]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:groupHeader groupName="Group2">
							<jr:cell style="celdaCabecera" height="1">
								<property name="com.jaspersoft.studio.unit.height" value="px"/>
								<box topPadding="0" leftPadding="0" bottomPadding="0">
									<bottomPen lineWidth="0.0"/>
								</box>
								<textField isStretchWithOverflow="true">
									<reportElement style="textoCabecera" isPrintRepeatedValues="false" x="0" y="0" width="449" height="1" isPrintInFirstWholeBand="true" uuid="2867af3b-fa9f-4935-98a1-befa89875baf"/>
									<box topPadding="3" bottomPadding="4">
										<bottomPen lineWidth="0.6"/>
									</box>
									<textFieldExpression><![CDATA["PRODUCTO : "+$F{nombre_prod_semiterminado}]]></textFieldExpression>
								</textField>
							</jr:cell>
						</jr:groupHeader>
						<jr:groupFooter groupName="Group1">
							<jr:cell style="celdaCabecera" height="1"/>
						</jr:groupFooter>
						<jr:column width="141" uuid="e394a104-9135-4251-b5ca-4948f679c5f4">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
							<jr:columnHeader style="celdaCabecera" height="28" rowSpan="2">
								<staticText>
									<reportElement style="textoCabecera" x="0" y="0" width="141" height="28" uuid="f986d8df-14b8-4713-8c70-9547fe1e2a65"/>
									<text><![CDATA[Material]]></text>
								</staticText>
							</jr:columnHeader>
							<jr:detailCell style="celdaRowspan" height="12">
								<textField isStretchWithOverflow="true">
									<reportElement style="condicionalMateriaPrima" isPrintRepeatedValues="false" x="0" y="0" width="141" height="12" isPrintInFirstWholeBand="true" printWhenGroupChanges="Group1" uuid="01ce536d-90b8-46f0-a2a8-920784a899b0"/>
									<textFieldExpression><![CDATA[$F{NOMBRE_MATERIAL}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="58" uuid="514214f1-a427-4800-82b5-c0fd37b7ffb4">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
							<jr:columnHeader style="celdaCabecera" height="28" rowSpan="2">
								<staticText>
									<reportElement style="textoCabecera" x="0" y="0" width="58" height="28" uuid="d2d022b8-280c-4455-ba14-456b3c2bd5a7"/>
									<text><![CDATA[Unidad Medida]]></text>
								</staticText>
							</jr:columnHeader>
							<jr:detailCell style="celdaRowspan" height="12">
								<textField isStretchWithOverflow="true">
									<reportElement style="condicionalMateriaPrima" isPrintRepeatedValues="false" x="0" y="0" width="58" height="12" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true" uuid="78981a77-8b25-4c26-8043-a292ce379799">
										<printWhenExpression><![CDATA[$V{Group1_COUNT}==1 || $V{PAGE_COUNT}==1]]></printWhenExpression>
									</reportElement>
									<textFieldExpression><![CDATA[$F{NOMBRE_UNIDAD_MEDIDA}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:columnGroup width="57" uuid="21c3b196-3939-436c-a653-1ec25746e04d">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Columns [2]"/>
							<jr:columnHeader style="celdaCabecera" height="14">
								<staticText>
									<reportElement style="textoCabecera" x="0" y="0" width="57" height="14" uuid="bc76d027-1830-4afe-9769-18398c987102"/>
									<text><![CDATA[Nro Preparaciones]]></text>
								</staticText>
							</jr:columnHeader>
							<jr:column width="28" uuid="df9ca60a-d6e3-48b8-bfc4-6fea47400949">
								<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
								<jr:columnHeader style="celdaCabecera" height="14">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="28" height="14" uuid="5bea9edf-2843-41da-b582-7b724e51402e"/>
										<text><![CDATA[FM]]></text>
									</staticText>
								</jr:columnHeader>
								<jr:detailCell style="celdaRowspan" height="12">
									<textField evaluationTime="Group" evaluationGroup="Group1" pattern="##" isBlankWhenNull="true">
										<reportElement style="condicionalNumeroFracciones" x="0" y="0" width="28" height="12" uuid="918dc6b9-96da-4c34-ae5c-4dc3597d6b27">
											<printWhenExpression><![CDATA[$V{Group1_COUNT}==1 || $V{PAGE_COUNT}==1]]></printWhenExpression>
										</reportElement>
										<textElement textAlignment="Center" verticalAlignment="Middle">
											<paragraph rightIndent="5"/>
										</textElement>
										<textFieldExpression><![CDATA[$V{numeroFm}]]></textFieldExpression>
									</textField>
								</jr:detailCell>
							</jr:column>
							<jr:column width="29" uuid="cc35fbdc-c441-46c2-aeae-198251fdffde">
								<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
								<jr:columnHeader style="celdaCabecera" height="14">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="29" height="14" uuid="3d9e0b26-faeb-4b32-8983-06b59ff01882"/>
										<text><![CDATA[DESV]]></text>
									</staticText>
								</jr:columnHeader>
								<jr:detailCell style="celdaRowspan" height="12">
									<textField evaluationTime="Group" evaluationGroup="Group1" pattern="##" isBlankWhenNull="true">
										<reportElement style="condicionalNumeroFracciones" x="0" y="0" width="29" height="12" uuid="68d09907-eda9-447b-9d78-cf4c8ca4ee2b">
											<printWhenExpression><![CDATA[$V{Group1_COUNT}==1 || $V{PAGE_COUNT}==1]]></printWhenExpression>
										</reportElement>
										<textElement textAlignment="Center" verticalAlignment="Middle">
											<paragraph rightIndent="5"/>
										</textElement>
										<textFieldExpression><![CDATA[$V{numeroDesv}]]></textFieldExpression>
									</textField>
								</jr:detailCell>
							</jr:column>
						</jr:columnGroup>
						<jr:columnGroup width="98" uuid="919ec90f-45de-4501-891e-694b967d855e">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Columns [2]"/>
							<jr:columnHeader style="celdaCabecera" height="14">
								<staticText>
									<reportElement style="textoCabecera" x="0" y="0" width="98" height="14" uuid="1b4fa7b4-230c-4594-ad3e-7b1220c6507a"/>
									<text><![CDATA[Cantidad]]></text>
								</staticText>
							</jr:columnHeader>
							<jr:column width="47" uuid="48d17545-b4fb-4e72-820b-482fcd5ab102">
								<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column5"/>
								<jr:columnHeader style="celdaCabecera" height="14">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="47" height="14" uuid="dbf1ed2d-d54b-4179-80ad-f616de5d4153"/>
										<text><![CDATA[FM]]></text>
									</staticText>
								</jr:columnHeader>
								<jr:detailCell style="celdaRowspan" height="12">
									<textField evaluationTime="Group" evaluationGroup="Group1" pattern="###0.00" isBlankWhenNull="true">
										<reportElement style="condicionalCantidadMaterial" x="0" y="0" width="47" height="12" uuid="f4cfa77f-90f6-41b1-a726-d3efebe5e99b">
											<printWhenExpression><![CDATA[$V{Group1_COUNT}==1 || $V{PAGE_COUNT}==1]]></printWhenExpression>
										</reportElement>
										<textElement textAlignment="Right" verticalAlignment="Middle">
											<paragraph rightIndent="5"/>
										</textElement>
										<textFieldExpression><![CDATA[$V{cantidadTotalFm}]]></textFieldExpression>
									</textField>
								</jr:detailCell>
							</jr:column>
							<jr:column width="51" uuid="fc162ed0-73a0-4a3a-a435-9eecf6dd9e20">
								<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column6"/>
								<jr:columnHeader style="celdaCabecera" height="14">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="51" height="14" uuid="44b5aae8-30cc-4caf-9075-78db10648faa"/>
										<text><![CDATA[DESV]]></text>
									</staticText>
								</jr:columnHeader>
								<jr:detailCell style="celdaRowspan" height="12">
									<textField evaluationTime="Group" evaluationGroup="Group1" pattern="###0.00" isBlankWhenNull="true">
										<reportElement style="condicionalCantidadMaterial" x="0" y="0" width="51" height="12" uuid="7e7713b8-7a74-4eb3-a62e-8edb01a31b05">
											<printWhenExpression><![CDATA[$V{Group1_COUNT}==1 || $V{PAGE_COUNT}==1]]></printWhenExpression>
										</reportElement>
										<textElement textAlignment="Right" verticalAlignment="Middle">
											<paragraph rightIndent="5"/>
										</textElement>
										<textFieldExpression><![CDATA[$V{cantidadTotalDesv}]]></textFieldExpression>
									</textField>
								</jr:detailCell>
							</jr:column>
						</jr:columnGroup>
						<jr:columnGroup width="95" uuid="b23ad272-9a92-46fd-bab3-db0662b078cc">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Columns [2]"/>
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
							<jr:columnHeader style="celdaCabecera" height="14">
								<property name="com.jaspersoft.studio.unit.height" value="px"/>
								<staticText>
									<reportElement style="textoCabecera" x="0" y="0" width="95" height="14" uuid="a661d39e-05d3-4222-b07c-151bcefa931f"/>
									<text><![CDATA[Fracciones]]></text>
								</staticText>
							</jr:columnHeader>
							<jr:column width="48" uuid="91640105-7f69-4acc-9024-1fdef5dec0e6">
								<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column7"/>
								<jr:columnHeader style="celdaCabecera" height="14">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="48" height="14" uuid="2ead144d-81cc-4226-826e-23d08a7b8512"/>
										<text><![CDATA[FM]]></text>
									</staticText>
								</jr:columnHeader>
								<jr:detailCell style="celdaBody" height="12">
									<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
										<reportElement style="condicionalCantidadFraccion" x="0" y="0" width="48" height="12" uuid="d3c7862c-a39a-44f9-9375-58076f57ec08"/>
										<textElement textAlignment="Right">
											<paragraph rightIndent="3"/>
										</textElement>
										<textFieldExpression><![CDATA[$F{CANTIDAD}]]></textFieldExpression>
									</textField>
								</jr:detailCell>
							</jr:column>
							<jr:column width="47" uuid="23c6c892-9c07-4675-8371-546c6e9d9ffb">
								<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column8"/>
								<jr:columnHeader style="celdaCabecera" height="14">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="47" height="14" uuid="a994c33a-25e7-4b0b-8b31-98189762285c"/>
										<text><![CDATA[DESV]]></text>
									</staticText>
								</jr:columnHeader>
								<jr:detailCell style="celdaBody" height="12">
									<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
										<reportElement style="condicionalCantidadFraccion" x="0" y="0" width="47" height="12" uuid="ea848f3a-962d-41ca-9119-ca5d386e4026"/>
										<textElement textAlignment="Right">
											<paragraph rightIndent="3"/>
										</textElement>
										<textFieldExpression><![CDATA[$F{CANTIDADDESVIACION}]]></textFieldExpression>
									</textField>
								</jr:detailCell>
							</jr:column>
						</jr:columnGroup>
					</jr:columnGroup>
				</jr:table>
			</componentElement>
			<componentElement>
				<reportElement positionType="Float" x="50" y="162" width="400" height="51" uuid="5c474af0-683a-4129-add6-1a8f7bb5b371">
					<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
				</reportElement>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="dataSetDiferenciasEp" uuid="aa71f27e-30bb-41eb-addc-f1c5aa920955">
						<datasetParameter name="codDesviacion">
							<datasetParameterExpression><![CDATA[$P{codDesviacion}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="codLoteProduccion">
							<datasetParameterExpression><![CDATA[$F{COD_LOTE_PRODUCCION}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="codProgramaProd">
							<datasetParameterExpression><![CDATA[$F{COD_PROGRAMA_PROD}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:columnGroup width="395" uuid="aaa5e772-db24-4b80-900a-f98ec4dcda18">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Columns [4]"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<jr:tableHeader style="celdaCabecera" height="14">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="395" height="14" uuid="ed1f28e2-544e-4e05-85aa-a5126ae868e3"/>
								<textElement>
									<font size="10"/>
								</textElement>
								<text><![CDATA[EMPAQUE PRIMARIO]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:groupHeader groupName="Group1">
							<jr:cell style="celdaCabecera" height="30">
								<textField>
									<reportElement style="texto" x="196" y="0" width="199" height="9" uuid="14bb0808-cb0f-40e4-8c08-16d37057f532"/>
									<textElement verticalAlignment="Middle">
										<paragraph leftIndent="5"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{NOMBRE_TIPO_PROGRAMA_PROD}]]></textFieldExpression>
								</textField>
								<textField>
									<reportElement style="texto" x="196" y="9" width="199" height="10" uuid="98ee4f5a-c0b5-461c-a0c6-6484659de4b5"/>
									<textElement verticalAlignment="Middle">
										<paragraph leftIndent="5"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{nombre_envaseprim}]]></textFieldExpression>
								</textField>
								<textField>
									<reportElement style="texto" x="196" y="20" width="199" height="10" uuid="742024dc-2967-436d-82c4-ab1973396c8c"/>
									<textElement verticalAlignment="Middle">
										<paragraph leftIndent="5"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{cantidadEnvase}]]></textFieldExpression>
								</textField>
								<staticText>
									<reportElement style="textoBold" x="0" y="1" width="196" height="8" uuid="88246136-7631-4c05-a22d-7339060d9863"/>
									<textElement textAlignment="Right" verticalAlignment="Middle"/>
									<text><![CDATA[Tipo Programa:]]></text>
								</staticText>
								<staticText>
									<reportElement style="textoBold" x="0" y="10" width="196" height="9" uuid="6002f776-44a5-4d6d-af33-3056cf51f4ec"/>
									<textElement textAlignment="Right" verticalAlignment="Middle"/>
									<text><![CDATA[Envase:]]></text>
								</staticText>
								<staticText>
									<reportElement style="textoBold" x="0" y="20" width="196" height="9" uuid="74eb0b80-c8e3-4e85-b1e4-7bdd3f578edc"/>
									<textElement textAlignment="Right" verticalAlignment="Middle"/>
									<text><![CDATA[Cantidad:]]></text>
								</staticText>
							</jr:cell>
						</jr:groupHeader>
						<jr:column width="196" uuid="0922bf82-65ae-4267-9802-31b439d36462">
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="10">
									<property name="com.jaspersoft.studio.unit.height" value="px"/>
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="196" height="10" uuid="67f48cc5-e051-48c9-8c2f-a18be55f6c98"/>
										<text><![CDATA[Material]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:groupFooter groupName="Group1">
								<jr:cell height="0"/>
							</jr:groupFooter>
							<jr:detailCell style="celdaBody" height="14">
								<textField isStretchWithOverflow="true">
									<reportElement style="condicionalEmpaquePrimario" x="0" y="0" width="196" height="14" uuid="43f526a3-4a03-43bd-b26c-24c2556b2a59"/>
									<textFieldExpression><![CDATA[$F{NOMBRE_MATERIAL}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="57" uuid="5d25b369-33af-48e1-9d4f-28c16c91f082">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="10">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="57" height="10" uuid="bbc4e284-0308-4fe3-aebc-f8c2eed355c1"/>
										<text><![CDATA[Cantidad F.M.]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:groupFooter groupName="Group1">
								<jr:cell height="0"/>
							</jr:groupFooter>
							<jr:detailCell style="celdaBody" height="14">
								<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
									<reportElement style="condicionalCantidadEmpaquePrimario" x="0" y="0" width="57" height="14" uuid="71686b15-f0a1-43a7-a881-6b719d7766af"/>
									<textElement textAlignment="Right">
										<paragraph rightIndent="5"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="59" uuid="cbd703d6-d973-4735-854c-bad712265855">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="10">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="59" height="10" uuid="2a635c45-7e13-442f-82f2-d16c4e7ac5cf"/>
										<text><![CDATA[Cantidad Desv.]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:groupFooter groupName="Group1">
								<jr:cell height="0"/>
							</jr:groupFooter>
							<jr:detailCell style="celdaBody" height="14">
								<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
									<reportElement style="condicionalCantidadEmpaquePrimario" x="0" y="0" width="59" height="14" uuid="0eb4c751-e636-4532-8903-13ea89977285"/>
									<textElement textAlignment="Right">
										<paragraph rightIndent="5"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{cantidadDesv}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="83" uuid="db30be74-6cf6-4263-b9cb-82a0225fc83a">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="10">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="83" height="10" uuid="962ef3e9-0891-4f96-8155-e8a1da091e51"/>
										<text><![CDATA[Unidad Medida]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:groupFooter groupName="Group1">
								<jr:cell height="0"/>
							</jr:groupFooter>
							<jr:detailCell style="celdaBody" height="14">
								<textField isStretchWithOverflow="true">
									<reportElement style="condicionalEmpaquePrimario" x="0" y="0" width="83" height="14" uuid="d2f0e153-b3b0-41ea-85dd-345b437c1db2"/>
									<textFieldExpression><![CDATA[$F{NOMBRE_UNIDAD_MEDIDA}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
					</jr:columnGroup>
				</jr:table>
			</componentElement>
			<componentElement>
				<reportElement positionType="Float" x="50" y="223" width="400" height="50" uuid="690509ef-7cab-4a1c-a2b7-a692add206f3">
					<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
				</reportElement>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="dataSetDiferenciasEs" uuid="2446a4ab-c674-4a68-9a9f-e33e3b818ae3">
						<datasetParameter name="codDesviacion">
							<datasetParameterExpression><![CDATA[$P{codDesviacion}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="codLoteProduccion">
							<datasetParameterExpression><![CDATA[$F{COD_LOTE_PRODUCCION}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="codProgramaProd">
							<datasetParameterExpression><![CDATA[$F{COD_PROGRAMA_PROD}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:columnGroup width="400" uuid="3f84874f-0c1e-4ccf-8921-e9698dda383f">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Columns [4]"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<jr:tableHeader style="celdaCabecera" height="12">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<staticText>
								<reportElement style="textoCabecera" x="0" y="0" width="400" height="12" uuid="c3cc70b5-fb6e-46cc-892e-ba055a954b34"/>
								<textElement>
									<font fontName="SansSerif" size="9"/>
								</textElement>
								<text><![CDATA[EMPAQUE SECUNDARIO]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:groupHeader groupName="Group1">
							<jr:cell style="celdaCabecera" height="20">
								<textField>
									<reportElement style="texto" x="200" y="0" width="200" height="10" uuid="7082e7f8-141a-404f-965e-ab6b4f94b37a"/>
									<textElement verticalAlignment="Middle">
										<paragraph leftIndent="5"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{NOMBRE_TIPO_PROGRAMA_PROD}]]></textFieldExpression>
								</textField>
								<textField>
									<reportElement style="texto" x="200" y="10" width="200" height="10" uuid="755d99e6-9807-4df0-b349-ec829fa10976"/>
									<textElement verticalAlignment="Middle">
										<paragraph leftIndent="5"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{NOMBRE_PRODUCTO_PRESENTACION}]]></textFieldExpression>
								</textField>
								<staticText>
									<reportElement style="textoBold" x="0" y="0" width="200" height="10" uuid="82a3b0fc-e14c-4daf-a6fc-5d79ad2b0105"/>
									<textElement textAlignment="Right" verticalAlignment="Middle"/>
									<text><![CDATA[Tipo Programa:]]></text>
								</staticText>
								<staticText>
									<reportElement style="textoBold" x="0" y="10" width="200" height="10" uuid="c2592aa4-fb98-4fcb-bc2e-ac8de2d4a33d"/>
									<textElement textAlignment="Right" verticalAlignment="Middle"/>
									<text><![CDATA[Presentación:]]></text>
								</staticText>
							</jr:cell>
						</jr:groupHeader>
						<jr:column width="200" uuid="80829816-59d7-42ac-81c0-5a8b303e2244">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="12">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="200" height="12" uuid="a7d92e5d-fed1-4fb2-af5d-c6cc498b4652"/>
										<text><![CDATA[Material]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:detailCell style="celdaBody" height="12">
								<textField isStretchWithOverflow="true">
									<reportElement style="condicionalEmpaqueSecundario" x="0" y="0" width="200" height="12" uuid="07013787-b05d-4f89-8089-bd962e058595"/>
									<textFieldExpression><![CDATA[$F{NOMBRE_MATERIAL}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="56" uuid="ec288a31-1772-4985-a736-c631f665abac">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="12">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="56" height="12" uuid="91712c2b-d513-4ab5-9b34-4aed4f95358f"/>
										<text><![CDATA[Cantidad F.M.]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:detailCell style="celdaBody" height="12">
								<textField pattern="###0.00" isBlankWhenNull="true">
									<reportElement style="condicionalCantidadEmpaqueSecundario" x="0" y="0" width="56" height="12" uuid="d1baf842-bf17-4c02-b7ca-f4cd0fc61d05"/>
									<textElement textAlignment="Right">
										<paragraph leftIndent="0" rightIndent="3"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="57" uuid="9f21ded3-3c41-4a3f-b7b4-ab05ea200958">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="12">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="57" height="12" uuid="3541112d-c020-4f4f-8cda-acb48f22d396"/>
										<text><![CDATA[Cantidad Desv.]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:detailCell style="celdaBody" height="12">
								<textField pattern="###0.00" isBlankWhenNull="true">
									<reportElement style="condicionalCantidadEmpaqueSecundario" x="0" y="0" width="57" height="12" uuid="9fc6943c-2b39-469a-9136-c2124049a37a"/>
									<textElement textAlignment="Right">
										<paragraph leftIndent="0" rightIndent="3"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{CANTIDADDesviacion}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="87" uuid="b8574664-24c2-4902-a417-79fe1999429a">
							<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
							<jr:groupHeader groupName="Group1">
								<jr:cell style="celdaCabecera" height="12">
									<staticText>
										<reportElement style="textoCabecera" x="0" y="0" width="87" height="12" uuid="b578ca46-69d0-455d-af55-715176cc86db"/>
										<text><![CDATA[Unidad Medida]]></text>
									</staticText>
								</jr:cell>
							</jr:groupHeader>
							<jr:detailCell style="celdaBody" height="12">
								<textField>
									<reportElement style="condicionalEmpaqueSecundario" x="0" y="0" width="87" height="12" uuid="48c2acfc-10e7-4f52-9f73-89dac1171d09"/>
									<textFieldExpression><![CDATA[$F{NOMBRE_UNIDAD_MEDIDA}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
					</jr:columnGroup>
				</jr:table>
			</componentElement>
			<textField>
				<reportElement style="texto" x="256" y="16" width="260" height="11" uuid="768d050f-ed32-47fd-a3db-21c85729ec76">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textFieldExpression><![CDATA[$F{nombrePersonal}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="textoBold" x="174" y="16" width="80" height="11" uuid="f5c5b719-bb42-4a94-b3e3-9f06844f3140">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Right">
					<paragraph rightIndent="3"/>
				</textElement>
				<text><![CDATA[Personal que Registra:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm">
				<reportElement style="texto" x="256" y="27" width="114" height="11" uuid="3425eb2c-0afe-44d1-b1fd-6d7b1807a7a0">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textFieldExpression><![CDATA[$F{FECHA_DESVIACION}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="textoBold" x="176" y="27" width="78" height="11" uuid="53ea237e-9a60-4627-ada5-d3edc2981ee1">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Right">
					<paragraph rightIndent="3"/>
				</textElement>
				<text><![CDATA[Fecha Registro:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true">
				<reportElement style="texto" x="257" y="38" width="258" height="12" uuid="34a02ba2-2e37-4f43-b250-f52e781aadd0"/>
				<textFieldExpression><![CDATA[$F{DESCRIPCION_DESVIACION}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="textoBold" x="174" y="38" width="80" height="12" uuid="2c41ab1c-b63b-405a-9d1b-3ceb906d51fd"/>
				<textElement textAlignment="Right">
					<paragraph rightIndent="3"/>
				</textElement>
				<text><![CDATA[DESCRIPCIÓN:]]></text>
			</staticText>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<lastPageFooter>
		<band splitType="Stretch"/>
	</lastPageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
